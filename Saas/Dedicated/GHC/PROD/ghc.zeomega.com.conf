<VirtualHost 10.0.19.5:80>
ServerName  ghc.zeomega.com
Redirect / https://ghc.zeomega.com/
</VirtualHost>

<VirtualHost 10.0.19.5:443>
ServerName  ghc.zeomega.com
# SSL entries
SSLEngine on
# Protocols and Cipher
SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM
# Certificate files
SSLCertificateFile D:/Apache2.2.22/conf/jiva.crt
SSLCertificateKeyFile D:/Apache2.2.22/conf/jiva.key
# Force IE8 compatability mode flag
<IfModule mod_setenvif.c>
BrowserMatch MSIE ie
Header set X-UA-Compatible "IE=EmulateIE8 ,chrome=1" env=ie  
</IfModule>

# Cerme integration
#ProxyPass /rm http://cerme.example.com/rm
#ProxyPassReverse /rm http://cerme.example.com/rm
# Tie the Jiva site to the cerme historical help
#ProxyPassMatch ^/help(\d{4}.*)$ http://cerme.example.com/help$1
# Redirect for the standard help
#ProxyPass /help http://cerme.example.com/help
#ProxyPassReverse /help http://cerme.example.com/help


#
Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
#
<Proxy balancer://jiva>
BalancerMember http://10.0.19.4:9010/ route=10
BalancerMember http://10.0.19.4:9011/ route=11
BalancerMember http://10.0.19.4:9012/ route=12
BalancerMember http://10.0.19.4:9013/ route=13
BalancerMember http://10.0.19.4:9014/ route=14
BalancerMember http://10.0.19.4:9015/ route=15
BalancerMember http://10.0.19.4:9016/ route=16
BalancerMember http://10.0.19.4:9017/ route=17
BalancerMember http://10.0.19.4:9018/ route=18
BalancerMember http://10.0.19.4:9019/ route=19
BalancerMember http://10.0.19.4:9020/ route=20
BalancerMember http://10.0.19.4:9021/ route=21
BalancerMember http://10.0.19.4:9022/ route=22
BalancerMember http://10.0.19.4:9023/ route=23
BalancerMember http://10.0.19.4:9024/ route=24
BalancerMember http://10.0.19.4:9025/ route=25
BalancerMember http://10.0.19.4:9026/ route=26
BalancerMember http://10.0.19.4:9027/ route=27
BalancerMember http://10.0.19.6:9010/ route=28
BalancerMember http://10.0.19.6:9011/ route=29
BalancerMember http://10.0.19.6:9012/ route=30
BalancerMember http://10.0.19.6:9013/ route=31
BalancerMember http://10.0.19.6:9014/ route=32
BalancerMember http://10.0.19.6:9015/ route=33
BalancerMember http://10.0.19.6:9016/ route=34
BalancerMember http://10.0.19.6:9017/ route=35
BalancerMember http://10.0.19.6:9018/ route=36
BalancerMember http://10.0.19.6:9019/ route=37
BalancerMember http://10.0.19.6:9020/ route=38
BalancerMember http://10.0.19.6:9021/ route=39
BalancerMember http://10.0.19.6:9022/ route=40
BalancerMember http://10.0.19.6:9023/ route=41
BalancerMember http://10.0.19.6:9024/ route=42
BalancerMember http://10.0.19.6:9025/ route=43
BalancerMember http://10.0.19.6:9026/ route=44
BalancerMember http://10.0.19.6:9027/ route=45
ProxySet stickysession=ROUTEID
</Proxy>
<Proxy balancer://jiva-lr>
# Balancer Members moved from jivaENV to here to handle long running processes
BalancerMember http://10.0.19.4:9028/ route=28
BalancerMember http://10.0.19.4:9029/ route=29
BalancerMember http://10.0.19.6:9028/ route=46
BalancerMember http://10.0.19.6:9029/ route=47
ProxySet stickysession=ROUTEID
</Proxy>

# Long running tasks
ProxyPassMatch ^/(.*/getSearchPageForDuplicatePatient)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/reassignEncounters)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/attachFaxes)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/printNotification)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/getDocument)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/createPdfDocument)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/addNewDocument)$ balancer://jiva-lr/VirtualHostBase/https/ghc.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests

# Default Proxy rule - Should always be last

ProxyPass / balancer://jiva/VirtualHostBase/https/ghc.zeomega.com:443/cms/ZeUI/VirtualHostRoot/ lbmethod=byrequests
ProxyPassReverse / https://ghc.zeomega.com:443

</VirtualHost>
