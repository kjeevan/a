<VirtualHost *:80>
ServerName lovelace.zeomega.com
Redirect / https://lovelace.zeomega.com/
</VirtualHost>

<VirtualHost 0.0.0.0:443>
ServerName lovelace.zeomega.com

SSLEngine on

SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM
SSLCertificateChainFile conf/ca.crt
SSLCertificateFile conf/jiva.crt
SSLCertificateKeyFile conf/jiva.key

ProxyPass /balancer-manager !
<Location /balancer-manager>
    SetHandler balancer-manager
    Order Deny,Allow
    Require valid-user
    AuthType Basic
    AuthName "Sysadmins Are Authenticated To Access"
    AuthUserFile conf/htpasswd
	Deny from all
    Allow from all 
</Location>
BrowserMatch ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0


# Now set up the Balancer list of nodes.
Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
<Proxy balancer://lovelace_balancerSSL>
BalancerMember http://10.0.1.4:8701/ route=1001
BalancerMember http://10.0.1.4:8702/ route=1002
BalancerMember http://10.0.1.4:8703/ route=1003
BalancerMember http://10.0.1.4:8704/ route=1004
BalancerMember http://10.0.1.4:8705/ route=1005
BalancerMember http://10.0.1.4:8706/ route=1006
BalancerMember http://10.0.1.4:8707/ route=1007
BalancerMember http://10.0.1.4:8708/ route=1008
BalancerMember http://10.0.1.4:8709/ route=1009
BalancerMember http://10.0.1.4:8710/ route=1010
BalancerMember http://10.0.1.4:8711/ route=1011
BalancerMember http://10.0.1.4:8712/ route=1012
BalancerMember http://10.0.1.4:8713/ route=1013
BalancerMember http://10.0.1.5:8701/ route=1014
BalancerMember http://10.0.1.5:8702/ route=1015
BalancerMember http://10.0.1.5:8703/ route=1016
BalancerMember http://10.0.1.5:8704/ route=1017
BalancerMember http://10.0.1.5:8705/ route=1018
BalancerMember http://10.0.1.5:8706/ route=1019
BalancerMember http://10.0.1.5:8707/ route=1020
BalancerMember http://10.0.1.5:8708/ route=1021
BalancerMember http://10.0.1.5:8709/ route=1022
BalancerMember http://10.0.1.5:8710/ route=1023
BalancerMember http://10.0.1.5:8711/ route=1024
BalancerMember http://10.0.1.5:8712/ route=1025
BalancerMember http://10.0.1.5:8713/ route=1026

ProxySet stickysession=ROUTEID
</Proxy>

#<Proxy balancer://lovelace_cluster2_SSL>
#BalancerMember http://10.0.1.4:8713/ route=4
#BalancerMember http://10.0.1.5:8713/ route=104
#ProxySet stickysession=ROUTEID
#</Proxy>

#Long running tasks - new format
#ProxyPassMatch ^/(.*/printNotification)$ balancer://lovelace_cluster2_SSL/VirtualHostBase/https/lovelace.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
#ProxyPassMatch ^/(.*/attachFaxes)$ balancer://lovelace_cluster2_SSL/VirtualHostBase/https/lovelace.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
#ProxyPassMatch ^/(.*/createPdfDocument)$ balancer://lovelace_cluster2_SSL/VirtualHostBase/https/lovelace.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests

# Default Proxy rule - Should always be last
ProxyPass / balancer://lovelace_balancerSSL/VirtualHostBase/https/lovelace.zeomega.com:443/cms/ZeUI/VirtualHostRoot/ lbmethod=byrequests
ProxyPassReverse /  https://lovelace.zeomega.com:443

</VirtualHost>
