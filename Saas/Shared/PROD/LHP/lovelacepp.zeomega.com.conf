<VirtualHost *:80>
ServerName lovelacepp.zeomega.com
Redirect / https://lovelacepp.zeomega.com/
</VirtualHost>

<VirtualHost 0.0.0.0:443>
ServerName lovelacepp.zeomega.com

SSLEngine on

SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM
SSLCertificateChainFile conf/ca.crt
SSLCertificateFile conf/jiva.crt
SSLCertificateKeyFile conf/jiva.key

ProxyPass /balancer-manager !
<Location /balancer-manager>
    SetHandler balancer-manager
    Order Deny,Allow
    Require valid-user
    AuthType Basic
    AuthName "Sysadmins Are Authenticated To Access"
    AuthUserFile conf/htpasswd
	Deny from all
    Allow from all 
</Location>

BrowserMatch ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

# Now set up the Balancer list of nodes.
Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
<Proxy balancer://lovelacepp_balancerSSL>
BalancerMember http://10.0.1.4:8801/ route=1
BalancerMember http://10.0.1.4:8802/ route=2
BalancerMember http://10.0.1.5:8801/ route=101
BalancerMember http://10.0.1.5:8802/ route=102
#BalancerMember http://10.0.1.9:8801/ route=201
#BalancerMember http://10.0.1.9:8802/ route=202
ProxySet stickysession=ROUTEID
</Proxy>

# Default Proxy rule - Should always be last
ProxyPass / balancer://lovelacepp_balancerSSL/VirtualHostBase/https/lovelacepp.zeomega.com:443/cms/prv_portal/VirtualHostRoot/ lbmethod=byrequests
ProxyPassReverse /  https://lovelacepp.zeomega.com:443

</VirtualHost>
