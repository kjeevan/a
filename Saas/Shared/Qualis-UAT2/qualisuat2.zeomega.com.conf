<VirtualHost 10.0.8.4:80>
ServerName  qualisuat2.zeomega.com
Redirect / https://qualisuat2.zeomega.com/
</VirtualHost>

<VirtualHost 10.0.8.4:443>
ServerName  qualisuat2.zeomega.com
# SSL entries
SSLEngine on
# Protocols and Cipher
SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM
# Certificate files
SSLCertificateChainFile conf/ca.crt
SSLCertificateFile conf/jiva.crt
SSLCertificateKeyFile conf/jiva.key
# Force IE8 compatability mode flag
<IfModule mod_setenvif.c>
BrowserMatch MSIE ie
Header set X-UA-Compatible "IE=EmulateIE8 ,chrome=1" env=ie  
</IfModule>

# Cerme integration
ProxyPass /rm http://10.0.8.4:8010/rm
ProxyPassReverse /rm http://qualisuat2.zeomega.com/rm
# Tie the Jiva site to the cerme historical help
ProxyPassMatch ^/help(\d{4}.*)$ http://10.0.8.4:8010/help$1
# Redirect for the standard help
ProxyPass /help http://10.0.8.4:8010/help
ProxyPassReverse /help http://qualisuat2.zeomega.com/help


#
Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
#
<Proxy balancer://jivaENV>
BalancerMember http://10.0.8.4:9010/ route=10
BalancerMember http://10.0.8.4:9011/ route=11
ProxySet stickysession=ROUTEID
</Proxy>
<Proxy balancer://jiva-lr>
# Balancer Members moved from jivaENV to here to handle long running processes
BalancerMember http://10.0.8.4:9012/ route=12
ProxySet stickysession=ROUTEID
</Proxy>

# Long running tasks
ProxyPassMatch ^/(.*/getSearchPageForDuplicatePatient)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/reassignEncounters)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/attachFaxes)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/printNotification)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/getDocument)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/createPdfDocument)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests
ProxyPassMatch ^/(.*/addNewDocument)$ balancer://jiva-lr/VirtualHostBase/https/qualisuat2.zeomega.com:443/VirtualHostRoot/$1 lbmethod=byrequests

# Default Proxy rule - Should always be last

ProxyPass / balancer://jivaENV/VirtualHostBase/https/qualisuat2.zeomega.com:443/cms/ZeUI/VirtualHostRoot/ lbmethod=byrequests
ProxyPassReverse / https://qualisuat2.zeomega.com:443

</VirtualHost>
